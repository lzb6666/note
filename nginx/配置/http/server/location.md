## location的匹配规则
location的匹配主要分两种方式：
- 最长前缀匹配
- 正则匹配
#### 最长前缀匹配
如下：
```
location / {
            root   D:/nginxTest;
            index  index.html index.htm;
        }

location /test/{
            root D:/nginxTest/test;
            index  index.html index.htm;
}
```
按照最长匹配进行，与location规则的书写顺序无关；

#### 正则匹配
正则的语法规则：
```
location [ = | ~ | ~* | ^~ ] uri { ... }
```
正则修饰符：
- = 表示精确匹配。只有请求的url路径与后面的字符串完全相等时，才会命中。
- ~ 表示该规则是使用正则定义的，区分大小写。
- ~* 表示该规则是使用正则定义的，不区分大小写。
- ^~ 表示如果该符号后面的字符是最佳匹配，采用该规则，不再进行后续的查找。
正则的匹配规则与顺序相关，如果找到了一条匹配的正则表达式，则停止查找，使
用该条目；
### 总体匹配规则
当解析完一个url准备进行查找时，先进行最长前缀匹配，并记录下匹配到的最佳
项，然后按照书写顺序进行正则匹配，当匹配到了正则之后，立即停止，使用该条
目，没有找到则使用之前的最长前缀结果。

### URL尾部的/需不需要
- location中的字符有没有/都没有影响。也就是说/user/和/user是一样的。
- 如果URL结构是https://domain.com/的形式，尾部有没有/都不会造成重定向。
因为浏览器在发起请求的时候，默认加上了/
- 如果URL的结构是https://domain.com/some-dir/。尾部如果缺少/将导致重定向
。因为根据约定，URL尾部的/表示目录，没有/表示文件。所以访问/some-dir/时，
服务器会自动去该目录下找对应的默认文件。如果访问/some-dir的话，服务器会
先去找some-dir文件，找不到的话会将some-dir当成目录，重定向到/some-dir/，
去该目录下找默认文件。